{"version":3,"sources":["webpack://Jcrop/webpack/bootstrap","webpack://Jcrop/./build/js/animate.js","webpack://Jcrop/./build/js/confobj.js","webpack://Jcrop/./build/js/cropper.js","webpack://Jcrop/./build/js/defaults.js","webpack://Jcrop/./build/js/domobj.js","webpack://Jcrop/./build/js/dragger.js","webpack://Jcrop/./build/js/easing.js","webpack://Jcrop/./build/js/handle.js","webpack://Jcrop/./build/js/jcrop.js","webpack://Jcrop/./build/js/keyboard.js","webpack://Jcrop/./build/js/rect.js","webpack://Jcrop/./build/js/shade.js","webpack://Jcrop/./build/js/stage/dom.js","webpack://Jcrop/./build/js/stage/image.js","webpack://Jcrop/./build/js/sticker.js","webpack://Jcrop/./build/js/util/dom.js","webpack://Jcrop/./build/js/util/extend.js"],"names":["Animate","el","from","to","cb","frames","efunc","p","cur","normalize","Easing","cur_frame","Promise","resolve","reject","step","forEach","key","Math","round","requestAnimationFrame","ConfObj","options","Object","defineProperty","configurable","enumerable","value","writable","initOptions","setOptions","Defaults","keys","_optconf","DomObj","Cropper","pos","Rect","init","createHandles","createMover","attachFocus","Keyboard","aspect","ar","getMax","w","h","render","fromPoint","x","y","stage","emit","addEventListener","e","rect","t","animateEasingFunction","animateFrames","r","stick","pe","parentElement","offsetWidth","offsetHeight","focus","rebound","handles","handle","Handle","create","c","appendTo","Sticker","move","active","style","top","left","width","height","document","createElement","opts","setAttribute","className","cropperClass","multi","maxCroppers","minCroppers","canDrag","canResize","canSelect","canRemove","multiple","autoFront","shading","shadeClass","shadeColor","shadeOpacity","getElementById","appendChild","evname","ev","createEvent","initEvent","cropTarget","dispatchEvent","cl","split","filter","i","join","length","hasClass","handler","Dragger","startcb","movecb","donecb","ox","oy","start","obj","type","touches","pageX","pageY","preventDefault","stopPropagation","window","done","changedTouches","removeEventListener","remove","m","module","exports","def","swing","b","d","inQuad","outQuad","inOutQuad","inCubic","outCubic","inOutCubic","inQuart","outQuart","inOutQuart","inQuint","outQuint","inOutQuint","inSine","cos","PI","outSine","sin","inOutSine","inExpo","pow","outExpo","inOutExpo","inCirc","sqrt","outCirc","inOutCirc","inElastic","s","a","abs","asin","outElastic","inOutElastic","inBack","undefined","outBack","inOutBack","inBounce","outBounce","inOutBounce","clname","attach","defaults","tagName","ImageStage","Stage","cropper","shiftKey","nudge","min","x2","y2","max","x1","y1","v","fromCoords","p1","p2","offsetLeft","offsetTop","sizeOf","point","quad","Manager","shades","Shade","isActive","adjust","enable","f","ceil","floor","l","insert","color","opacity","updateShades","setStyle","backgroundColor","o","crops","Set","initListeners","initStageDrag","limitWidgets","n","Array","removeCropper","shift","size","crop","canCreate","offsetParent","addCropper","listen","activate","console","info","z","zIndex","addClass","removeClass","refresh","pop","delete","add","reorderCroppers","disable","attachToStage","wrapper","parentNode","insertBefore","srcEl","onload","resizeToImage","bind","ord","sw","sh","locked","getCornerPoint","getOppositeCorner","stuck","translateStuckPoint","relx","rely","xx","yy","sp","getMaxRect","getDragQuadrant","res","wrap","target","childNodes","child","div","replace","orig","replaceChild","extend","extended","arguments","argument","prop","prototype","hasOwnProperty","call"],"mappings":"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","file":"jcrop.dev.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./build/js/jcrop.js\");\n","import Easing from './easing';\n\n// Animate function uses requestAnimationFrame to sequence events\n// Easing functions adapted from jQuery-ui and Robert Penner's equations\n// el - element to animate\n// from and to - \"rect\" objects representing initial and target coordinates\n// cb - callback receives a \"rect\" object for each update/frame\n// frames - number of frames to animate\n// efunc - name of easing function to use\n// returns a Promise that resolves when the animation is complete\n\nfunction Animate(el,from,to,cb,frames=30,efunc='swing') {\n  // Set the keys to update, in this case it is our Rect's properties\n  // Normalize the initial state as a Rect named \"cur\"\n  const p = ['x','y','w','h'];\n  const cur = from.normalize();\n\n  // Lookup the easing function if it is a string\n  efunc = (typeof efunc == 'string')? Easing[efunc] : efunc;\n\n  var cur_frame = 0;\n\n  // Return a promise that will resolve when the animation is complete\n  return new Promise((resolve,reject) => {\n    function step(){\n\n      if (cur_frame < frames) {\n\n        // Update each key for this frame\n        p.forEach(key => \n          cur[key] = Math.round(\n            efunc(cur_frame, from[key], to[key] - from[key], frames)\n          )\n        );\n\n        // Send it to the callback function\n        // update the current frame counter\n        // and request the next animation frame\n        cb(cur);\n        cur_frame++;\n        requestAnimationFrame(step);\n      }\n\n      // We've reached the end of the animation frames\n      else resolve();\n    }\n\n    requestAnimationFrame(step);\n  });\n}\n\nexport default Animate;\n","import extend from './util/extend';\nimport DomObj from './domobj';\nimport Defaults from './defaults';\n\nclass ConfObj extends DomObj {\n\n  constructor(el,options={}) {\n    super(el);\n    this.options = {};\n    Object.defineProperty(this,'_optconf',{\n      configurable: false,\n      enumerable: false,\n      value: {},\n      writable: true\n    });\n    this.initOptions();\n    this.setOptions(extend({},Defaults,options));\n  }\n\n  setOptions(options){\n    this.options = extend({},this.options,options);\n\n    Object.keys(options).forEach(key => {\n      if (this._optconf[key])\n        this._optconf[key](options[key]);\n    });\n\n    return this;\n  }\n\n  initOptions(){ }\n\n}\n\nexport default ConfObj;\n","import extend from './util/extend';\nimport Handle from './handle';\nimport Defaults from './defaults';\nimport Dragger from './dragger';\nimport Rect from './rect';\nimport Sticker from './sticker';\nimport ConfObj from './confobj';\nimport Keyboard from './keyboard';\nimport Animate from './animate';\n\nclass Cropper extends ConfObj {\n\n  constructor(el,options={}) {\n    super(el,options);\n    this.pos = Rect.from(this.el);\n    this.init();\n  }\n\n  init() {\n    this.createHandles();\n    this.createMover();\n    this.attachFocus();\n    new Keyboard(this);\n    return this;\n  }\n\n  initOptions(){\n    this._optconf['aspectRatio'] = ar => {\n      const p = this.pos;\n      this.aspect = ar || null;\n      if (this.aspect && p) {\n        var [w,h] = Rect.getMax(p.w,p.h,ar);\n        this.render(Rect.fromPoint([p.x,p.y],w,h));\n      }\n    };\n  }\n\n  attachToStage(stage) {\n    this.stage = stage;\n    this.emit('crop.attach');\n  }\n\n  attachFocus() {\n    this.el.addEventListener('focus',(e) => {\n      this.emit('crop.activate');\n      this.emit('crop.update');\n    },false);\n  }\n\n  animate(rect,frames,efunc){\n    const t = this;\n    efunc = efunc || t.options.animateEasingFunction || 'swing';\n    frames = frames || t.options.animateFrames || 30;\n    return Animate(t.el,t.pos,rect,r => t.render(r.normalize()),frames,efunc);\n  }\n\n  createMover() {\n    var w,h;\n    this.pos = Rect.from(this.el);\n    var stick;\n    Dragger(\n      this.el,\n      () => {\n        const pe = this.el.parentElement;\n        [w,h] = [ pe.offsetWidth, pe.offsetHeight ];\n        stick = Rect.from(this.el);\n        this.el.focus();\n        this.emit('crop.activate');\n        return true;\n      },\n      (x,y) => {\n        this.pos.x = stick.x + x;\n        this.pos.y = stick.y + y;\n        this.render(this.pos.rebound(w,h));\n      },\n      () => { }\n    )\n  }\n\n  nudge(x=0,y=0) {\n    const pe = this.el.parentElement;\n    const [w,h] = [ pe.offsetWidth, pe.offsetHeight ];\n    if (x) this.pos.x += x;\n    if (y) this.pos.y += y;\n    this.render(this.pos.rebound(w,h));\n  }\n\n  createHandles() {\n    this.options.handles.forEach(c => {\n      const handle = Handle.create('handle '+c);\n      handle.appendTo(this.el);\n\n      var stick;\n      Dragger(handle.el,\n        () => {\n          const pe = this.el.parentElement;\n          const w = pe.offsetWidth;\n          const h = pe.offsetHeight;\n          stick = Sticker.create(Rect.from(this.el), w, h, c);\n          if (this.aspect) stick.aspect = this.aspect;\n          this.el.focus();\n          this.emit('crop.active');\n          return true;\n        },\n        (x,y) => this.render(stick.move(x,y)),\n        () => { }\n      );\n    });\n    return this;\n  }\n\n  isActive() {\n    return (this.stage && (this.stage.active === this));\n  }\n\n  render(r) {\n    r = r || this.pos;\n    this.el.style.top = Math.round(r.y) + 'px';\n    this.el.style.left = Math.round(r.x) + 'px';\n    this.el.style.width = Math.round(r.w) + 'px';\n    this.el.style.height = Math.round(r.h) + 'px';\n    this.pos = r;\n    this.emit('crop.update');\n    return this;\n  }\n\n  doneDragging() {\n    this.pos = Rect.from(this.el);\n  }\n\n}\n\nCropper.create = function(options={}){\n  const el = document.createElement('div');\n  const opts = extend({},Defaults,options);\n  el.setAttribute('tabindex','0');\n  el.className = opts.cropperClass || 'cropper';\n  return new Cropper(el,opts);\n};\n\nexport default Cropper;\n","export default {\n  animateEasingFunction: 'swing',\n  animateFrames: 30,\n  multi: true,\n  maxCroppers: null,\n  minCroppers: 1,\n  cropperClass: 'cropper',\n  canDrag: true,\n  canResize: true,\n  canSelect: true,\n  canRemove: true,\n  multiple: false,\n  autoFront: true,\n  active: true,\n  handles: ['n','s','e','w','sw','nw','ne','se'],\n  shading: true,\n  shadeClass: 'shade',\n  shadeColor: 'black',\n  shadeOpacity: 0.5,\n  x: 0,\n  y: 0,\n  w: 100,\n  h: 100\n};\n\n","class DomObj {\n\n  constructor(el) {\n    if (typeof el == 'string') el = document.getElementById(el);\n    this.el = el;\n  }\n\n  appendTo(el) {\n    if (typeof el == 'string') el = document.getElementById(el);\n    el.appendChild(this.el);\n    return this;\n  }\n\n  emit(evname) {\n    const ev = document.createEvent('Event');\n    ev.initEvent(evname, true, true);\n    ev.cropTarget = this;\n    this.el.dispatchEvent(ev);\n  }\n\n  removeClass(cl) {\n    this.el.className = this.el.className\n      .split(' ').filter(i => cl != i).join(' ');\n    return this;\n  }\n\n  hasClass(cl) {\n    return this.el.className.split(' ').filter(i => cl == i).length;\n  }\n\n  addClass(cl) {\n    if (!this.hasClass(cl)) this.el.className += ' ' + cl;\n  }\n\n  listen(evname,handler) {\n    this.el.addEventListener(evname,e => handler(e.cropTarget,e));\n    return this;\n  }\n\n}\n\nexport default DomObj;\n\n","/*\n  Dragger function - sets up dragging callbacks on an element\n*/\n\nconst Dragger = function(el,startcb,movecb,donecb){\n  var ox, oy;\n  if (typeof el == 'string') el = document.getElementById(el);\n\n  el.addEventListener('mousedown',start);\n  el.addEventListener('touchstart',start);\n\n  function start(e) {\n    const obj = (e.type == 'touchstart')? e.touches[0]: e;\n\n    ox = obj.pageX;\n    oy = obj.pageY;\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!startcb(ox,oy,obj)) return;\n\n    if (e.type == 'mousedown') {\n      window.addEventListener('mousemove',move);\n      document.addEventListener('mouseup',done);\n    }\n    else if (e.type == 'touchstart') {\n      document.addEventListener('touchmove',move);\n      document.addEventListener('touchend',done);\n    }\n  }\n\n  function move(e) {\n    const obj = (e.type == 'touchmove')? e.changedTouches[0]: e;\n    e.stopPropagation();\n    movecb(obj.pageX - ox,obj.pageY - oy);\n  }\n\n  function done(e) {\n    const obj = (e.type == 'touchend')? e.changedTouches[0]: e;\n\n    if (obj.pageX && obj.pageY)\n      movecb(obj.pageX - ox,obj.pageY - oy);\n\n    document.removeEventListener('mouseup',done);\n    window.removeEventListener('mousemove',move);\n    document.removeEventListener('touchmove',move);\n    document.removeEventListener('touchend',done);\n\n    donecb();\n  }\n\n  function remove() {\n    el.removeEventListener('mousedown',start);\n    el.removeEventListener('touchstart',start);\n  }\n\n  return { remove };\n}\n\nexport default Dragger;\n","/* ============================================================\n * Easing functions adapted from jQuery easing library\n * Open source under the BSD License.\n *\n * Copyright  2008 George McGinley Smith\n * All rights reserved.\n * ======================================================== */\n\nconst m = module.exports = {\n  // t: current time, b: begInnIng value, c: change In value, d: duration\n  def: 'outQuad',\n  swing: function (t, b, c, d) {\n    return m[m.def](t, b, c, d);\n  },\n  inQuad: function (t, b, c, d) {\n    return c*(t/=d)*t + b;\n  },\n  outQuad: function (t, b, c, d) {\n    return -c *(t/=d)*(t-2) + b;\n  },\n  inOutQuad: function (t, b, c, d) {\n    if ((t/=d/2) < 1) return c/2*t*t + b;\n    return -c/2 * ((--t)*(t-2) - 1) + b;\n  },\n  inCubic: function (t, b, c, d) {\n    return c*(t/=d)*t*t + b;\n  },\n  outCubic: function (t, b, c, d) {\n    return c*((t=t/d-1)*t*t + 1) + b;\n  },\n  inOutCubic: function (t, b, c, d) {\n    if ((t/=d/2) < 1) return c/2*t*t*t + b;\n    return c/2*((t-=2)*t*t + 2) + b;\n  },\n  inQuart: function (t, b, c, d) {\n    return c*(t/=d)*t*t*t + b;\n  },\n  outQuart: function (t, b, c, d) {\n    return -c * ((t=t/d-1)*t*t*t - 1) + b;\n  },\n  inOutQuart: function (t, b, c, d) {\n    if ((t/=d/2) < 1) return c/2*t*t*t*t + b;\n    return -c/2 * ((t-=2)*t*t*t - 2) + b;\n  },\n  inQuint: function (t, b, c, d) {\n    return c*(t/=d)*t*t*t*t + b;\n  },\n  outQuint: function (t, b, c, d) {\n    return c*((t=t/d-1)*t*t*t*t + 1) + b;\n  },\n  inOutQuint: function (t, b, c, d) {\n    if ((t/=d/2) < 1) return c/2*t*t*t*t*t + b;\n    return c/2*((t-=2)*t*t*t*t + 2) + b;\n  },\n  inSine: function (t, b, c, d) {\n    return -c * Math.cos(t/d * (Math.PI/2)) + c + b;\n  },\n  outSine: function (t, b, c, d) {\n    return c * Math.sin(t/d * (Math.PI/2)) + b;\n  },\n  inOutSine: function (t, b, c, d) {\n    return -c/2 * (Math.cos(Math.PI*t/d) - 1) + b;\n  },\n  inExpo: function (t, b, c, d) {\n    return (t==0) ? b : c * Math.pow(2, 10 * (t/d - 1)) + b;\n  },\n  outExpo: function (t, b, c, d) {\n    return (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;\n  },\n  inOutExpo: function (t, b, c, d) {\n    if (t==0) return b;\n    if (t==d) return b+c;\n    if ((t/=d/2) < 1) return c/2 * Math.pow(2, 10 * (t - 1)) + b;\n    return c/2 * (-Math.pow(2, -10 * --t) + 2) + b;\n  },\n  inCirc: function (t, b, c, d) {\n    return -c * (Math.sqrt(1 - (t/=d)*t) - 1) + b;\n  },\n  outCirc: function (t, b, c, d) {\n    return c * Math.sqrt(1 - (t=t/d-1)*t) + b;\n  },\n  inOutCirc: function (t, b, c, d) {\n    if ((t/=d/2) < 1) return -c/2 * (Math.sqrt(1 - t*t) - 1) + b;\n    return c/2 * (Math.sqrt(1 - (t-=2)*t) + 1) + b;\n  },\n  inElastic: function (t, b, c, d) {\n    var s=1.70158;var p=0;var a=c;\n    if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;\n    if (a < Math.abs(c)) { a=c; var s=p/4; }\n    else var s = p/(2*Math.PI) * Math.asin (c/a);\n    return -(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;\n  },\n  outElastic: function (t, b, c, d) {\n    var s=1.70158;var p=0;var a=c;\n    if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;\n    if (a < Math.abs(c)) { a=c; var s=p/4; }\n    else var s = p/(2*Math.PI) * Math.asin (c/a);\n    return a*Math.pow(2,-10*t) * Math.sin( (t*d-s)*(2*Math.PI)/p ) + c + b;\n  },\n  inOutElastic: function (t, b, c, d) {\n    var s=1.70158;var p=0;var a=c;\n    if (t==0) return b;  if ((t/=d/2)==2) return b+c;  if (!p) p=d*(.3*1.5);\n    if (a < Math.abs(c)) { a=c; var s=p/4; }\n    else var s = p/(2*Math.PI) * Math.asin (c/a);\n    if (t < 1) return -.5*(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;\n    return a*Math.pow(2,-10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )*.5 + c + b;\n  },\n  inBack: function (t, b, c, d, s) {\n    if (s == undefined) s = 1.70158;\n    return c*(t/=d)*t*((s+1)*t - s) + b;\n  },\n  outBack: function (t, b, c, d, s) {\n    if (s == undefined) s = 1.70158;\n    return c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;\n  },\n  inOutBack: function (t, b, c, d, s) {\n    if (s == undefined) s = 1.70158; \n    if ((t/=d/2) < 1) return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b;\n    return c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;\n  },\n  inBounce: function (t, b, c, d) {\n    return c - m.outBounce (d-t, 0, c, d) + b;\n  },\n  outBounce: function (t, b, c, d) {\n    if ((t/=d) < (1/2.75)) {\n      return c*(7.5625*t*t) + b;\n    } else if (t < (2/2.75)) {\n      return c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;\n    } else if (t < (2.5/2.75)) {\n      return c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;\n    } else {\n      return c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;\n    }\n  },\n  inOutBounce: function (t, b, c, d) {\n    if (t < d/2) return m.inBounce (t*2, 0, c, d) * .5 + b;\n    return m.outBounce (t*2-d, 0, c, d) * .5 + c*.5 + b;\n  }\n};\n\n/*\n * TERMS OF USE - EASING EQUATIONS\n * Open source under the BSD License. \n * \n * Copyright  2001 Robert Penner All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without modification, \n * are permitted provided that the following conditions are met:\n * \n * Redistributions of source code must retain the above copyright notice,\n * this list of conditions and the following disclaimer.\n *\n * Redistributions in binary form must reproduce the above copyright\n * notice, this list of conditions and the following disclaimer in the\n * documentation and/or other materials provided with the distribution.\n * \n * Neither the name of the author nor the names of contributors may be\n * used to endorse or promote products derived from this software\n * without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS\n * FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE\n * COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,\n * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED \n * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF\n * THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. \n */\n","import DomObj from './domobj';\n\nclass Handle extends DomObj {\n}\n\nHandle.create = function(clname){\n  const el = document.createElement('div');\n  el.className = clname;\n  return new Handle(el);\n};\n\nexport default Handle;\n","import extend from './util/extend';\nimport defaults from './defaults';\nimport Stage from './stage/dom';\nimport ImageStage from './stage/image';\nimport Cropper from './cropper';\nimport Shade from './shade';\nimport Handle from './handle';\nimport Dragger from './dragger';\nimport Rect from './rect';\nimport Sticker from './sticker';\nimport DomObj from './domobj';\nimport Easing from './easing';\n\nexport function attach(el,options={}) {\n  options = extend({},defaults,options);\n\n  if (typeof el == 'string') el = document.getElementById(el);\n  if (el.tagName == 'IMG') return new ImageStage(el,options);\n\n  return new Stage(el,options);\n}\n\nexport { Stage, defaults, Dragger, Cropper, Rect, Handle, Sticker, Easing };\n","class Keyboard {\n  constructor(cropper) {\n    this.cropper = cropper;\n    this.attach();\n  }\n\n  attach() {\n    const c = this.cropper;\n    c.el.addEventListener('keyup',(e) => {\n      const d = e.shiftKey ? 10: 1;\n      switch(e.key) {\n        case 'ArrowRight': c.nudge(d); break;\n        case 'ArrowLeft': c.nudge(-d); break;\n        case 'ArrowUp': c.nudge(0,-d); break;\n        case 'ArrowDown': c.nudge(0,d); break;\n\n        case 'Delete':\n        case 'Backspace':\n          e.preventDefault();\n          c.emit('crop.remove');\n          break;\n      }\n    });\n  }\n}\n\nexport default Keyboard;\n","/* Rect class -- describes a rectangle with two points, usually\n   top left and bottom right. It allows the second set of coordinates\n   to be described as either w/h or x2/y2 and allows getting and\n   setting of those values such that the object values will always be\n   consistent with the latest input. It should be noted that it does not\n   attempt to keep these points normalized. That is, you should expect\n   to see the actual w/h properties to sometimes be negative values.\n   To normalize the values, use the normalize method, which will return\n   a new Rect object with normalized values.\n*/\nclass Rect {\n\n  constructor() {\n    this.x = 0;\n    this.y = 0;\n    this.w = 0;\n    this.h = 0;\n  }\n\n  set x1(v) {\n    this.w = this.x2 - v;\n    this.x = v;\n  }\n\n  set y1(v) {\n    this.h = this.y2 - v;\n    this.y = v;\n  }\n\n  get x2() {\n    return this.x + this.w;\n  }\n\n  set x2(x) {\n    this.w = x - this.x;\n  }\n\n  get y2() {\n    return this.y + this.h;\n  }\n\n  get aspect() {\n    return this.w/this.h;\n  }\n\n  set y2(y) {\n    this.h = y - this.y;\n  }\n\n  normalize() {\n    const [x1,y1,x2,y2] = [\n      Math.min(this.x,this.x2),\n      Math.min(this.y,this.y2),\n      Math.max(this.x,this.x2),\n      Math.max(this.y,this.y2)\n    ];\n    return Rect.create(x1,y1,x2-x1,y2-y1);\n  }\n\n  rebound(w,h) {\n    const rect = this.normalize();\n    if (rect.x<0) rect.x = 0;\n    if (rect.y<0) rect.y = 0;\n    if (rect.x2>w) rect.x = w-rect.w;\n    if (rect.y2>h) rect.y = h-rect.h;\n    return rect;\n  }\n}\n\nRect.fromCoords = function(p1,p2){\n  const [x1,y1,x2,y2] = [\n    Math.min(p1[0],p2[0]),\n    Math.min(p1[1],p2[1]),\n    Math.max(p1[0],p2[0]),\n    Math.max(p1[1],p2[1])\n  ];\n  return Rect.create(x1,y1,x2-x1,y2-y1);\n};\n\nRect.create = function(x=0,y=0,w=0,h=0) {\n  const c = new Rect;\n  c.x = x;\n  c.y = y;\n  c.w = w;\n  c.h = h;\n  return c;\n};\n\nRect.from = function(el){\n  const c = new Rect;\n  c.x = el.offsetLeft;\n  c.y = el.offsetTop;\n  c.w = el.offsetWidth;\n  c.h = el.offsetHeight;\n  return c;\n};\n\nRect.sizeOf = function(el){\n  const c = Rect.from(el);\n  c.x = 0;\n  c.y = 0;\n  return c;\n};\n\nRect.getMax = function(w,h,aspect) {\n  if ((w/h) > aspect) return [ h*aspect, h ];\n    else return [ w, w/aspect ];\n};\n\nRect.fromPoint = function(point,w,h,quad='br'){\n  const c = new Rect;\n  c.x = point[0];\n  c.y = point[1];\n  switch(quad){\n    case 'br':\n      c.x2 = c.x + w;\n      c.y2 = c.y + h;\n      break;\n    case 'bl':\n      c.x2 = c.x - w;\n      c.y2 = c.y + h;\n      break;\n    case 'tl':\n      c.x2 = c.x - w;\n      c.y2 = c.y - h;\n      break;\n    case 'tr':\n      c.x2 = c.x + w;\n      c.y2 = c.y - h;\n      break;\n  }\n  return c;\n};\n\nexport default Rect;\n\n","import Rect from './rect';\nimport DomObj from './domobj';\n\nclass Manager {\n  constructor(el) {\n    if (typeof el == 'string') el = document.getElementById(el);\n    this.el = el;\n    this.shades = {};\n  }\n\n  init(options={}) {\n    this.active = (options.shading!==undefined)? options.shading: true;\n\n    this.keys().forEach(\n      key => this.shades[key] = Shade.create(options,key)\n    );\n\n    this.el.addEventListener('crop.update',(e) => {\n      if (e.cropTarget.isActive() && e.cropTarget.options.shading)\n        this.adjust(e.cropTarget.pos);\n    },false);\n\n    this.enable();\n  }\n  \n  adjust(rect){\n    const f = Rect.from(this.el);\n    const s = this.shades;\n    s.t.h = rect.y;\n    s.r.w = Math.ceil(f.w - rect.x2);\n    s.b.h = f.h - rect.y2;\n    s.t.w = s.b.w = Math.floor(rect.w);\n    s.l.w = s.t.x = s.b.x = Math.floor(rect.x);\n  }\n\n  keys(){\n    return [ 't', 'l', 'r', 'b' ];\n  }\n\n  enable(){\n    const s = this.shades;\n    this.keys().forEach(key => s[key].insert(this.el));\n  }\n\n  disable(){\n    const s = this.shades;\n    this.keys().forEach(key => s[key].remove());\n  }\n\n  setStyle(color,opacity){\n    const s = this.shades;\n    this.keys().forEach(key => s[key].color(color).opacity(opacity));\n  }\n\n}\n\nManager.attach = function(i){\n  const el = i.el;\n  const m = new Manager(el);\n  m.init(i.options);\n  i.shades = m;\n  i._optconf['shading'] = v => i.updateShades();\n  i._optconf['shadeColor'] = v => m.setStyle(v);\n  i._optconf['shadeOpacity'] = v => m.setStyle(null,v);\n  return m;\n};\n\nclass Shade extends DomObj {\n  insert(el){ el.appendChild(this.el); }\n  remove(){ this.el.remove(); }\n\n  set w(w) { this.el.style.width = w + 'px'; }\n  set h(h) { this.el.style.height = h + 'px'; }\n  set x(l) { this.el.style.left = l + 'px'; }\n\n  color(c) {\n    if (c) this.el.style.backgroundColor = c;\n    return this;\n  }\n\n  opacity(o) {\n    if (o) this.el.style.opacity = o;\n    return this;\n  }\n}\n\nShade.create = function(o,key) {\n  const el = document.createElement('div');\n  const clname = o.shadeClass || 'shade';\n  el.className = `${clname} ${key}`;\n  const obj = new Shade(el);\n  return obj.color(o.shadeColor).opacity(o.shadeOpacity);\n};\n\nShade.Manager = Manager;\n\nexport default Shade;\n","import extend from '../util/extend';\nimport Cropper from '../cropper';\nimport Shade from '../shade';\nimport Dragger from '../dragger';\nimport ConfObj from '../confobj';\n\nclass Stage extends ConfObj {\n\n  constructor(el,options) {\n    super(el,options);\n    this.crops = new Set;\n    this.active = null;\n    this.init();\n  }\n\n  init() {\n    this.initListeners();\n    this.initStageDrag();\n    Shade.Manager.attach(this);\n  }\n\n  initOptions(){\n    this._optconf['multi'] = v => { if (!v) this.limitWidgets() };\n  }\n\n  focus() {\n    this.el.focus();\n    return this;\n  }\n\n  limitWidgets(n=1) {\n    if (!this.crops || (n<1)) return false;\n    const crops = Array.from(this.crops);\n\n    while(crops.length > n)\n      this.removeCropper(crops.shift());\n\n    return this;\n  }\n\n  canCreate() {\n    const n = this.crops.size;\n    const o = this.options;\n    if ((o.maxCroppers!==null) && (n >= o.maxCroppers)) return false;\n    if (!o.multi && (n >= o.minCroppers)) return false;\n    return true;\n  }\n\n  canRemove() {\n    const n = this.crops.size;\n    const o = this.options;\n    if (this.active && !this.active.options.canRemove) return false;\n    if (!o.canRemove || (n <= o.minCroppers)) return false;\n    return true;\n  }\n\n  initStageDrag() {\n    var crop, pos, w, h;\n    Dragger(this.el,\n      (x,y,e) => {\n        if (!this.canCreate()) return false;\n        crop = Cropper.create(this.options);\n        pos = crop.pos;\n        pos.x = e.pageX - this.el.offsetParent.offsetLeft - this.el.offsetLeft;\n        pos.y = e.pageY - this.el.offsetParent.offsetTop - this.el.offsetTop;\n        w = this.el.offsetWidth;\n        h = this.el.offsetHeight;\n        crop.render(pos);\n        this.addCropper(crop);\n        crop.el.focus();\n        return true;\n      },\n      (x,y) => {\n        pos.x2 = pos.x + x;\n        pos.y2 = pos.y + y;\n        if (pos.x2 < 0) pos.x2 = 0;\n        if (pos.y2 < 0) pos.y2 = 0;\n        if (pos.x2 > w) pos.x2 = w;\n        if (pos.y2 > h) pos.y2 = h;\n        crop.render(pos.normalize());\n      },\n      () => { }\n    );\n  }\n\n  initListeners() {\n    this.listen('crop.activate',c => this.activate(c),false);\n    this.listen('crop.attach',c => console.info('Cropper attached'));\n    this.listen('crop.remove',c => this.removeCropper(c));\n  }\n\n  reorderCroppers() {\n    var z = 1000;\n    this.crops.forEach(crop => {\n      crop.el.style.zIndex = z++;\n      if (this.active === crop) crop.addClass('active');\n        else crop.removeClass('active');\n    });\n    this.refresh();\n  }\n\n  activate(cropper) {\n    cropper = cropper || Array.from(this.crops).pop();\n    if (cropper) {\n      this.active = cropper;\n      this.crops.delete(cropper);\n      this.crops.add(cropper);\n      this.reorderCroppers();\n      this.active.el.focus();\n    } else {\n      this.shades.disable();\n    }\n    return this;\n  }\n\n  addCropper(cropper) {\n    cropper.attachToStage(this);\n    cropper.appendTo(this.el);\n    cropper.init();\n    this.activate(cropper);\n    return this;\n  }\n\n  newCropper(rect,options={}) {\n    options = extend({},options,this.options);\n    const crop = Cropper.create(options);\n    crop.render(rect);\n    this.addCropper(crop);\n    crop.el.focus();\n    return crop;\n  }\n\n  removeCropper(cropper) {\n    if (!this.canRemove()) return false;\n    cropper.el.remove();\n    this.crops.delete(cropper);\n    this.activate();\n  }\n\n  refresh() {\n    this.options.shading && this.active &&\n      this.shades.adjust(this.active.pos);\n  }\n\n  updateShades() {\n    if (!this.shades) return;\n\n    if (this.options.shading) this.shades.enable();\n      else this.shades.disable();\n\n    this.options.shading && this.active &&\n      this.shades.adjust(this.active.pos);\n\n    return this;\n  }\n\n  setOptions(options={}){\n    super.setOptions(options);\n\n    if (this.crops)\n      Array.from(this.crops)\n        .forEach(i => i.setOptions(options));\n  }\n}\n\nexport default Stage;\n\n","import { wrap, replace, div } from '../util/dom';\nimport Stage from './dom';\n\nclass ImageStage extends Stage {\n  constructor(el,options) {\n    const wrapper = div('cropstage imagestage');\n    el.parentNode.insertBefore(wrapper, el);\n    wrapper.appendChild(el);\n    super(wrapper,options);\n    this.srcEl = el;\n    el.onload = this.resizeToImage.bind(this);\n    this.resizeToImage();\n  }\n\n  resizeToImage() {\n    const w = this.srcEl.width;\n    const h = this.srcEl.height;\n    this.el.style.width = w+'px';\n    this.el.style.height = h+'px';\n    this.refresh();\n  }\n}\n\nexport default ImageStage;\n","/* This class creates a draggable frame by locking the\n   corner opposite to the one being dragged */\n\nimport Rect from './rect';\n\nclass Sticker {\n\n  constructor(rect,w,h,ord) {\n    this.sw = w;\n    this.sh = h;\n    this.rect = rect;\n    this.locked = this.getCornerPoint(this.getOppositeCorner(ord));\n    this.stuck = this.getCornerPoint(ord);\n  }\n\n  move(x,y) {\n    return Rect.fromCoords(this.locked, this.translateStuckPoint(x,y));\n  }\n\n  // Determine \"quadrant\" of handle drag relative to locked point\n  // returns string tl = top left, br = bottom right, etc\n  getDragQuadrant(x,y) {\n    const relx = this.locked[0] - x;\n    const rely = this.locked[1] - y;\n    if ((relx < 0) && (rely < 0)) return 'br';\n    else if ((relx >= 0) && (rely >= 0)) return 'tl';\n    else if ((relx < 0) && (rely >= 0)) return 'tr';\n    else return 'bl';\n  }\n\n  // get the maximum aspect ratio rectangle for the current drag\n  getMaxRect(x,y,aspect) {\n    return Rect.getMax(\n      Math.abs(this.locked[0] - x),\n      Math.abs(this.locked[1] - y),\n      aspect\n    );\n  }\n\n  // given the offset of the drag versus the stuck point,\n  // determine the real dragging coordinates\n  translateStuckPoint(ox,oy) {\n    const [xx,yy,sp] = this.stuck;\n\n    var x = (xx === null)? sp: xx + ox;\n    var y = (yy === null)? sp: yy + oy;\n\n    if (x>this.sw) x = this.sw;\n    if (y>this.sh) y = this.sh;\n    if (x<0) x = 0;\n    if (y<0) y = 0;\n\n    if (this.aspect) {\n      var [w,h] = this.getMaxRect(x,y,this.aspect);\n      var quad = this.getDragQuadrant(x,y);\n      var res = Rect.fromPoint(this.locked,w,h,quad);\n      return [ res.x2, res.y2 ];\n    }\n\n    return [x,y];\n  }\n\n  getCornerPoint(h) {\n    const p = this.rect;\n    switch(h) {\n      case 'n':  return [ null, p.y,  p.x  ];\n      case 's':  return [ null, p.y2, p.x2 ];\n      case 'e':  return [ p.x2, null, p.y2 ];\n      case 'w':  return [ p.x,  null, p.y  ];\n      case 'se': return [ p.x2, p.y2 ];\n      case 'sw': return [ p.x,  p.y2 ];\n      case 'ne': return [ p.x2, p.y  ];\n      case 'nw': return [ p.x,  p.y  ];\n    }\n  }\n\n  getOppositeCorner(h) {\n    switch(h){\n      case 'n':  return 'se';\n      case 's':  return 'nw';\n      case 'e':  return 'nw';\n      case 'w':  return 'se';\n      case 'se': return 'nw';\n      case 'sw': return 'ne';\n      case 'ne': return 'sw';\n      case 'nw': return 'se';\n    }\n  }\n\n}\n\nSticker.create = function(rect,w,h,ord){\n  return new Sticker(rect,w,h,ord);\n};\n\nexport default Sticker;\n","export const wrap = (target, wrapper=document.createElement('div')) => {\n  [ ...target.childNodes ].forEach(child => wrapper.appendChild(child));\n  target.appendChild(wrapper);\n  return wrapper;\n};\n\nexport const div = (clname,el=document.createElement('div')) => {\n  el.className = clname;\n  return el;\n};\n\nexport const replace = (orig, target) => {\n  orig.parentElement.replaceChild(target,orig);\n  return target;\n};\n\n","export default function extend() {\n  var extended = {};\n\n  for(let key in arguments) {\n    var argument = arguments[key];\n    for (let prop in argument) {\n      if (Object.prototype.hasOwnProperty.call(argument, prop)) {\n        extended[prop] = argument[prop];\n      }\n    }\n  }\n\n  return extended;\n};\n\n"],"sourceRoot":""}